<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°±æ¥­è¦å‰‡RAGã‚·ã‚¹ãƒ†ãƒ ï¼šè©³ç´°è¨­è¨ˆä»•æ§˜æ›¸ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¶ãƒ¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f3f4f6;
            /* Cool Gray 100 */
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        .chunk-box {
            transition: all 0.2s ease;
        }

        .chunk-box:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        .chat-bubble {
            position: relative;
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 12px;
            margin-bottom: 12px;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .chat-bubble.user {
            background-color: #3b82f6;
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }

        .chat-bubble.bot {
            background-color: #ffffff;
            color: #1f2937;
            margin-right: auto;
            border-bottom-left-radius: 4px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        .step-connector {
            position: absolute;
            top: 24px;
            bottom: -24px;
            left: 20px;
            width: 2px;
            background-color: #e5e7eb;
            z-index: 0;
        }

        .step-item:last-child .step-connector {
            display: none;
        }
    </style>
    <!-- Chosen Palette: Technical Blue (Slate/Blue/White) - Professional, trustworthy, suitable for system specs. -->
    <!-- Application Structure Plan: 
         - Layout: Single page dashboard with a top navigation bar for the 4 key spec areas (Data, Prompt, Test, Update).
         - Section 1 (Data Logic): Visualizes the chunking strategy. Interactive text splitter demo to show how "Article" vs "Paragraph" logic works conceptually.
         - Section 2 (Prompt Design): Displays the persona and a simulated chat interface to demonstrate the "Citation Requirement" and "Tone".
         - Section 3 (QA & Testing): Uses Chart.js to visualize the evaluation rubric and criteria weights. Interactive score calculator.
         - Section 4 (Update Flow): A vertical stepper visualising the weekly cycle.
         - Rationale: Converts dry text specs into active simulations, allowing the user to "feel" how the design decisions impact the system behavior. -->
    <!-- Visualization & Content Choices: 
         - Data: "Chunk Visualizer" (HTML/CSS blocks) -> Goal: Inform/Organize -> Shows logical split.
         - Prompt: "Chat Simulator" (JS/HTML) -> Goal: Inform -> Demonstrates the output format.
         - QA: "Doughnut Chart" (Chart.js) -> Goal: Compare -> Visualizes scoring distribution.
         - Lifecycle: "Process Steps" (HTML/CSS) -> Goal: Change -> Shows flow over time.
         - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>

<body class="text-slate-800 bg-slate-50 min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 shadow-sm sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <span class="text-2xl">ğŸ“‘</span>
                <div>
                    <h1 class="text-lg font-bold text-slate-800">å°±æ¥­è¦å‰‡RAG è©³ç´°è¨­è¨ˆä»•æ§˜æ›¸</h1>
                    <p class="text-xs text-slate-500">Project ID: RAG_SAMPLE1 | Status: Design Phase</p>
                </div>
            </div>
            <div class="hidden md:flex space-x-1">
                <button onclick="switchTab('data')" id="btn-data"
                    class="px-4 py-2 text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 transition-colors">1.
                    ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†</button>
                <button onclick="switchTab('prompt')" id="btn-prompt"
                    class="px-4 py-2 text-sm font-medium rounded-md text-slate-600 hover:text-slate-900 hover:bg-slate-100 transition-colors">2.
                    ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ</button>
                <button onclick="switchTab('test')" id="btn-test"
                    class="px-4 py-2 text-sm font-medium rounded-md text-slate-600 hover:text-slate-900 hover:bg-slate-100 transition-colors">3.
                    ãƒ†ã‚¹ãƒˆãƒ»è©•ä¾¡</button>
                <button onclick="switchTab('update')" id="btn-update"
                    class="px-4 py-2 text-sm font-medium rounded-md text-slate-600 hover:text-slate-900 hover:bg-slate-100 transition-colors">4.
                    æ›´æ–°ãƒ•ãƒ­ãƒ¼</button>
            </div>
        </div>
        <!-- Mobile Nav -->
        <div class="md:hidden flex overflow-x-auto px-4 py-2 space-x-2 border-t border-slate-100 bg-white">
            <button onclick="switchTab('data')"
                class="flex-shrink-0 px-3 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700">ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†</button>
            <button onclick="switchTab('prompt')"
                class="flex-shrink-0 px-3 py-1 text-xs font-medium rounded-full bg-slate-100 text-slate-600">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</button>
            <button onclick="switchTab('test')"
                class="flex-shrink-0 px-3 py-1 text-xs font-medium rounded-full bg-slate-100 text-slate-600">è©•ä¾¡è¨­è¨ˆ</button>
            <button onclick="switchTab('update')"
                class="flex-shrink-0 px-3 py-1 text-xs font-medium rounded-full bg-slate-100 text-slate-600">æ›´æ–°ãƒ•ãƒ­ãƒ¼</button>
        </div>
    </header>

    <main class="flex-grow max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- TAB 1: Data Preprocessing -->
        <div id="tab-data" class="tab-content active">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-slate-800 mb-2">ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†ãƒ»ãƒãƒ£ãƒ³ã‚¯è¨­è¨ˆ</h2>
                <p class="text-slate-600">
                    RAGã®æ¤œç´¢ç²¾åº¦ã‚’å·¦å³ã™ã‚‹ã€Œæ¡æ–‡åˆ†å‰²ï¼ˆãƒãƒ£ãƒ³ã‚­ãƒ³ã‚°ï¼‰ã€ã¨ã€Œãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã€ã®å®šç¾©ã§ã™ã€‚Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆsrc/processor/ï¼‰ã§ã®å®Ÿè£…ä»•æ§˜ã¨ãªã‚Šã¾ã™ã€‚</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Logic Card -->
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                    <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center">
                        <span class="bg-blue-100 text-blue-600 p-1.5 rounded-md mr-2 text-xl">âœ‚ï¸</span>
                        åˆ†å‰²ãƒ«ãƒ¼ãƒ« (Chunking Rules)
                    </h3>
                    <div class="space-y-4">
                        <div class="p-4 bg-slate-50 rounded-lg border-l-4 border-blue-500">
                            <h4 class="font-bold text-slate-700 text-sm">åŸºæœ¬ãƒ«ãƒ¼ãƒ«: æ¡ (Article) å˜ä½</h4>
                            <p class="text-sm text-slate-600 mt-1">åŸå‰‡ã¨ã—ã¦1ã¤ã®æ¡æ–‡ã‚’1ã¤ã®ãƒãƒ£ãƒ³ã‚¯ã¨ã—ã¦æ‰±ã„ã¾ã™ã€‚æ–‡è„ˆã®åˆ†æ–­ã‚’é˜²ããŸã‚ã§ã™ã€‚</p>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-lg border-l-4 border-amber-400">
                            <h4 class="font-bold text-slate-700 text-sm">ä¾‹å¤–å‡¦ç†: é•·æ–‡åˆ†å‰²</h4>
                            <p class="text-sm text-slate-600 mt-1">1,000æ–‡å­—ã‚’è¶…ãˆã‚‹ã‚ˆã†ãªé•·å¤§ãªæ¡æ–‡ã¯ã€ã€Œé … (Paragraph)ã€å˜ä½ã§åˆ†å‰²ã—ã¾ã™ã€‚</p>
                        </div>
                        <div class="p-4 bg-slate-50 rounded-lg border-l-4 border-emerald-400">
                            <h4 class="font-bold text-slate-700 text-sm">é‡è¤‡ (Overlap)</h4>
                            <p class="text-sm text-slate-600 mt-1">ãƒãƒ£ãƒ³ã‚¯é–“ã« <span
                                    class="font-mono bg-white px-1 border rounded">50ã€œ100æ–‡å­—</span>
                                ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ©ãƒƒãƒ—ã‚’æŒãŸã›ã€å¢ƒç•Œä»˜è¿‘ã®æƒ…å ±æ¬ è½ã‚’é˜²ãã¾ã™ã€‚</p>
                        </div>
                    </div>

                    <div class="mt-8">
                        <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center">
                            <span class="bg-indigo-100 text-indigo-600 p-1.5 rounded-md mr-2 text-xl">ğŸ·ï¸</span>
                            ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¦ä»¶
                        </h3>
                        <div class="grid grid-cols-2 gap-3 text-sm">
                            <div class="bg-indigo-50 p-3 rounded border border-indigo-100">
                                <span class="block font-mono text-indigo-700 font-bold mb-1">bylaw_name</span>
                                <span class="text-slate-600">ä¾‹ï¼šä¸Šé–¢ç”ºè·å“¡å°±æ¥­è¦å‰‡</span>
                            </div>
                            <div class="bg-indigo-50 p-3 rounded border border-indigo-100">
                                <span class="block font-mono text-indigo-700 font-bold mb-1">article_number</span>
                                <span class="text-slate-600">ä¾‹ï¼šç¬¬12æ¡</span>
                            </div>
                            <div class="bg-indigo-50 p-3 rounded border border-indigo-100">
                                <span class="block font-mono text-indigo-700 font-bold mb-1">source_url</span>
                                <span class="text-slate-600">è‡ªæ²»ä½“ã‚µã‚¤ãƒˆURL</span>
                            </div>
                            <div class="bg-indigo-50 p-3 rounded border border-indigo-100">
                                <span class="block font-mono text-indigo-700 font-bold mb-1">update_date</span>
                                <span class="text-slate-600">æœ€çµ‚æ›´æ–°æ—¥</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Demo -->
                <div class="bg-slate-800 rounded-xl shadow-lg border border-slate-700 p-6 text-white flex flex-col">
                    <h3 class="text-lg font-bold mb-4 text-slate-200">Processing Simulator</h3>
                    <p class="text-sm text-slate-400 mb-4">Pythonå‰å‡¦ç†ã®æŒ™å‹•ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚ä»¥ä¸‹ã®ãƒ†ã‚­ã‚¹ãƒˆãŒã©ã†åˆ†å‰²ã•ã‚Œã‚‹ã‹ç¢ºèªã§ãã¾ã™ã€‚</p>

                    <div
                        class="flex-grow bg-slate-900 rounded-lg p-4 font-mono text-xs text-slate-300 overflow-y-auto mb-4 border border-slate-700 h-64">
                        <div id="raw-text-display">
                            ç¬¬1æ¡ï¼ˆç›®çš„ï¼‰<br>
                            ã“ã®è¦å‰‡ã¯ã€è·å“¡ã®å°±æ¥­ã«é–¢ã—å¿…è¦ãªäº‹é …ã‚’å®šã‚ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã™ã‚‹ã€‚<br>
                            <br>
                            ç¬¬2æ¡ï¼ˆå®šç¾©ï¼‰<br>
                            ã“ã®è¦å‰‡ã«ãŠã„ã¦ã€Œè·å“¡ã€ã¨ã¯ã€åœ°æ–¹å…¬å‹™å“¡æ³•ã«åŸºã¥ãæ¡ç”¨ã•ã‚ŒãŸè€…ã‚’ã„ã†ã€‚<br>
                            2 å‰é …ã®è·å“¡ã«ã¯ã€è‡¨æ™‚çš„ã«ä»»ç”¨ã•ã‚ŒãŸè€…ã¯å«ã¾ãªã„ã€‚<br>
                            <br>
                            ç¬¬3æ¡ï¼ˆæœå‹™ã®æ ¹æœ¬åŸºæº–ï¼‰<br>
                            è·å“¡ã¯ã€å…¨ä½“ã®å¥‰ä»•è€…ã¨ã—ã¦ã€å…¬å…±ã®åˆ©ç›Šã®ãŸã‚ã«å‹¤å‹™ã—ã€ã‹ã¤ã€è·å‹™ã®é‚è¡Œã«å½“ãŸã£ã¦ã¯ã€å…¨åŠ›ã‚’æŒ™ã’ã¦ã“ã‚Œã«å°‚å¿µã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚<br>
                            <!-- More dummy text simulates lengthy content -->
                        </div>
                    </div>

                    <div class="space-y-3">
                        <div class="flex justify-between items-center text-sm">
                            <span class="text-slate-400">Processing Status:</span>
                            <span id="process-status" class="text-emerald-400 font-bold">Ready</span>
                        </div>
                        <button onclick="simulateProcessing()"
                            class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-lg transition-colors shadow-lg">
                            å¤‰æ›ãƒ»ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä»˜ä¸ã‚’å®Ÿè¡Œ (Run Processor)
                        </button>
                    </div>

                    <div id="processed-output" class="mt-4 hidden space-y-2">
                        <!-- JS generated chunks -->
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 2: Prompt Design -->
        <div id="tab-prompt" class="tab-content">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-slate-800 mb-2">ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ & AIæŒ™å‹•</h2>
                <p class="text-slate-600">Difyä¸Šã®System Promptè¨­å®šã¨ã€æœŸå¾…ã•ã‚Œã‚‹å›ç­”ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆå‡ºå…¸æ˜ç¤ºï¼‰ã®å®šç¾©ã§ã™ã€‚</p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                <!-- Specs Column -->
                <div class="lg:col-span-5 space-y-6">
                    <!-- System Role Card -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-4 opacity-10">
                            <span class="text-8xl">ğŸ¤–</span>
                        </div>
                        <h3 class="text-lg font-bold text-slate-800 mb-2">2.1 ã‚·ã‚¹ãƒ†ãƒ ãƒ­ãƒ¼ãƒ«å®šç¾©</h3>
                        <div class="bg-slate-100 p-4 rounded-lg text-slate-700 italic border-l-4 border-slate-400">
                            ã€Œã‚ãªãŸã¯è‡ªæ²»ä½“ã®äººäº‹åŠ´å‹™ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã§ã™ã€‚æä¾›ã•ã‚ŒãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆæ¡æ–‡ï¼‰ã®ã¿ã«åŸºã¥ãã€è·å“¡ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚ã€
                        </div>
                        <div class="mt-4">
                            <h4 class="text-sm font-bold text-slate-600 mb-2">ãƒˆãƒ¼ãƒ³ & ãƒãƒŠãƒ¼</h4>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded border">ä¸å¯§</span>
                                <span class="px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded border">å³æ ¼</span>
                                <span class="px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded border">å…¬å‹™å“¡çš„</span>
                            </div>
                        </div>
                    </div>

                    <!-- Guidelines Card -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                        <h3 class="text-lg font-bold text-slate-800 mb-4">2.2 å›ç­”ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³</h3>
                        <ul class="space-y-4">
                            <li class="flex items-start">
                                <span
                                    class="flex-shrink-0 w-6 h-6 rounded-full bg-red-100 text-red-600 flex items-center justify-center text-xs font-bold mr-3">å¿…</span>
                                <div>
                                    <h4 class="text-sm font-bold text-slate-800">å‡ºå…¸ã®æ˜ç¤º (Critical)</h4>
                                    <p class="text-xs text-slate-500 mt-1">å›ç­”æœ«å°¾ã«å¿…ãš <code>ã€æ ¹æ‹ æ¡æ–‡: ã€‡ã€‡è¦å‰‡ ç¬¬ã€‡æ¡ã€‘</code>
                                        ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã€‚</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <span
                                    class="flex-shrink-0 w-6 h-6 rounded-full bg-amber-100 text-amber-600 flex items-center justify-center text-xs font-bold mr-3">è­¦</span>
                                <div>
                                    <h4 class="text-sm font-bold text-slate-800">ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾ç­–</h4>
                                    <p class="text-xs text-slate-500 mt-1">æƒ…å ±ãŒãªã„å ´åˆã¯çŸ¥ã£ãŸã‹ã¶ã‚Šã‚’ã›ãšã€ã€Œè¦å®šãŒè¦‹å½“ãŸã‚Šã¾ã›ã‚“ã€ã¨å›ç­”ã™ã‚‹ã€‚</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Simulator Column -->
                <div class="lg:col-span-7">
                    <div class="bg-white rounded-xl shadow-lg border border-slate-200 h-full flex flex-col">
                        <div
                            class="p-4 border-b border-slate-100 bg-slate-50 rounded-t-xl flex justify-between items-center">
                            <span class="font-bold text-slate-700">Chat Simulation Preview</span>
                            <span class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full">Active Model:
                                Gemma-2-9b</span>
                        </div>

                        <!-- Chat Area -->
                        <div id="chat-display" class="flex-grow p-6 overflow-y-auto bg-slate-50/50"
                            style="min-height: 400px; max-height: 500px;">
                            <div class="chat-bubble bot">
                                ã“ã‚“ã«ã¡ã¯ã€‚äººäº‹åŠ´å‹™æ‹…å½“AIã§ã™ã€‚å°±æ¥­è¦å‰‡ã«é–¢ã™ã‚‹è³ªå•ãŒã‚ã‚Œã°ã©ã†ãã€‚<br>
                                <span class="text-xs text-slate-400 mt-1 block">System Ready</span>
                            </div>
                        </div>

                        <!-- Controls -->
                        <div class="p-4 bg-white border-t border-slate-100 rounded-b-xl">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-2">
                                <button onclick="sendSimulatedMessage('fact')"
                                    class="px-4 py-2 bg-blue-50 text-blue-700 text-sm font-medium rounded hover:bg-blue-100 text-left">
                                    Q: æœ‰çµ¦ä¼‘æš‡ã®æ—¥æ•°ã¯ï¼Ÿ<br><span class="text-xs opacity-70">äº‹å®Ÿç¢ºèªãƒ‘ã‚¿ãƒ¼ãƒ³</span>
                                </button>
                                <button onclick="sendSimulatedMessage('condition')"
                                    class="px-4 py-2 bg-purple-50 text-purple-700 text-sm font-medium rounded hover:bg-purple-100 text-left">
                                    Q: æ¬ å‹¤ãŒã‚ã‚‹å ´åˆã®æ˜‡çµ¦ã¯ï¼Ÿ<br><span class="text-xs opacity-70">æ¡ä»¶åˆ†å²ãƒ‘ã‚¿ãƒ¼ãƒ³</span>
                                </button>
                                <button onclick="sendSimulatedMessage('unknown')"
                                    class="px-4 py-2 bg-slate-100 text-slate-700 text-sm font-medium rounded hover:bg-slate-200 text-left">
                                    Q: ç¤¾å“¡é£Ÿå ‚ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯ï¼Ÿ<br><span class="text-xs opacity-70">ä¸åœ¨ç¢ºèªãƒ‘ã‚¿ãƒ¼ãƒ³</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 3: Testing -->
        <div id="tab-test" class="tab-content">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-slate-800 mb-2">ãƒ†ã‚¹ãƒˆãƒ»è©•ä¾¡è¨­è¨ˆ</h2>
                <p class="text-slate-600">30ä»¶ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ç”¨ã„ãŸå“è³ªè©•ä¾¡åŸºæº–ï¼ˆRubricï¼‰ã§ã™ã€‚</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">

                <!-- Criteria Card -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <h3 class="text-lg font-bold text-slate-800 mb-6">3.2 æ¡ç‚¹åŸºæº– (Scoring Rubric)</h3>

                    <div class="space-y-4">
                        <div
                            class="flex items-center p-4 bg-emerald-50 rounded-lg border border-emerald-100 hover:shadow-md transition-shadow cursor-default">
                            <div
                                class="flex-shrink-0 h-12 w-12 rounded-full bg-emerald-500 text-white flex items-center justify-center font-bold text-xl shadow-sm">
                                5</div>
                            <div class="ml-4">
                                <div class="font-bold text-emerald-800">Perfect (åˆæ ¼)</div>
                                <div class="text-sm text-emerald-700">æ­£ç¢ºãªå›ç­” ï¼‹ <span
                                        class="underline decoration-emerald-500/50">æ­£ã—ã„å‡ºå…¸æ˜è¨˜</span>ã€‚</div>
                            </div>
                        </div>

                        <div
                            class="flex items-center p-4 bg-amber-50 rounded-lg border border-amber-100 hover:shadow-md transition-shadow cursor-default">
                            <div
                                class="flex-shrink-0 h-12 w-12 rounded-full bg-amber-400 text-white flex items-center justify-center font-bold text-xl shadow-sm">
                                3</div>
                            <div class="ml-4">
                                <div class="font-bold text-amber-800">Partial (è¦æ”¹å–„)</div>
                                <div class="text-sm text-amber-700">å›ç­”ã¯æ­£ã—ã„ãŒã€å‡ºå…¸ãŒä¸æ˜ç­ã¾ãŸã¯èª¤ã‚Šã€‚</div>
                            </div>
                        </div>

                        <div
                            class="flex items-center p-4 bg-red-50 rounded-lg border border-red-100 hover:shadow-md transition-shadow cursor-default">
                            <div
                                class="flex-shrink-0 h-12 w-12 rounded-full bg-red-500 text-white flex items-center justify-center font-bold text-xl shadow-sm">
                                1</div>
                            <div class="ml-4">
                                <div class="font-bold text-red-800">Fail (å¤±æ•—)</div>
                                <div class="text-sm text-red-700">å›ç­”ãŒä¸æ­£ç¢ºã€ã¾ãŸã¯ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå˜˜ï¼‰ã€‚</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Visualization -->
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex flex-col items-center">
                    <h3 class="text-lg font-bold text-slate-800 mb-2">è©•ä¾¡ã‚«ãƒ†ã‚´ãƒªé…åˆ† (å…¨30å•)</h3>
                    <p class="text-sm text-slate-500 mb-6">ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®æ§‹æˆæ¯”ç‡ç›®æ¨™</p>

                    <div class="chart-container">
                        <canvas id="evaluationChart"></canvas>
                    </div>

                    <div class="mt-6 w-full text-sm text-slate-600 bg-slate-50 p-4 rounded-lg">
                        <h4 class="font-bold mb-2">ã‚«ãƒ†ã‚´ãƒªå®šç¾©:</h4>
                        <ul class="list-disc list-inside space-y-1">
                            <li><strong>äº‹å®Ÿç¢ºèª (Fact):</strong> æ¡æ–‡ã«æ•°å€¤ç­‰ãŒæ˜è¨˜ã•ã‚Œã¦ã„ã‚‹å•ã€‚</li>
                            <li><strong>æ¡ä»¶åˆ†å² (Conditional):</strong> ã€Œã‚‚ã—ã€œãªã‚‰ã€ã¨ã„ã†è¤‡åˆæ¡ä»¶ã€‚</li>
                            <li><strong>ä¸åœ¨ç¢ºèª (None):</strong> è¦å®šå¤–ã®è³ªå•ã¸ã®å¯¾å¿œåŠ›ã€‚</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- TAB 4: Updates -->
        <div id="tab-update" class="tab-content">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-slate-800 mb-2">æ›´æ–°ãƒ•ãƒ­ãƒ¼è©³ç´° (é€±æ¬¡)</h2>
                <p class="text-slate-600">ãƒ‡ãƒ¼ã‚¿ã®é®®åº¦ã‚’ä¿ã¤ãŸã‚ã®é‹ç”¨ã‚µã‚¤ã‚¯ãƒ«ã§ã™ã€‚</p>
            </div>

            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-8 max-w-4xl mx-auto">
                <div class="relative pl-8">
                    <!-- Step 1 -->
                    <div class="step-item relative mb-12">
                        <div class="step-connector"></div>
                        <div
                            class="absolute -left-10 top-0 flex h-10 w-10 items-center justify-center rounded-full bg-blue-100 ring-8 ring-white">
                            <span class="text-blue-600 font-bold">1</span>
                        </div>
                        <div
                            class="bg-slate-50 p-4 rounded-lg border border-slate-100 shadow-sm hover:border-blue-300 transition-colors">
                            <h3 class="text-lg font-bold text-slate-800">åé›† (Collection)</h3>
                            <p class="text-sm text-slate-600 mt-1 mb-2">Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã‚ˆã‚‹å®šæœŸãƒã‚§ãƒƒã‚¯ã€‚</p>
                            <div
                                class="flex items-center space-x-2 text-xs font-mono bg-white p-2 rounded border border-slate-200 text-slate-500">
                                <span>ğŸ”</span>
                                <span>Check: ã€Œæ–°ç€ä¾‹è¦ã€ã€Œæ›´æ–°æ—¥ã€ tag on Municipality Site</span>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div class="step-item relative mb-12">
                        <div class="step-connector"></div>
                        <div
                            class="absolute -left-10 top-0 flex h-10 w-10 items-center justify-center rounded-full bg-blue-100 ring-8 ring-white">
                            <span class="text-blue-600 font-bold">2</span>
                        </div>
                        <div
                            class="bg-slate-50 p-4 rounded-lg border border-slate-100 shadow-sm hover:border-blue-300 transition-colors">
                            <h3 class="text-lg font-bold text-slate-800">å·®åˆ†æ¯”è¼ƒ (Diff Check)</h3>
                            <p class="text-sm text-slate-600 mt-1 mb-2">ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã¨ã®ãƒãƒƒã‚·ãƒ¥æ¯”è¼ƒã€‚</p>
                            <div
                                class="flex items-center space-x-2 text-xs font-mono bg-white p-2 rounded border border-slate-200 text-slate-500">
                                <span>ğŸ“‚</span>
                                <span>Compare: data/raw/current vs fetched_html</span>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3 -->
                    <div class="step-item relative">
                        <div
                            class="absolute -left-10 top-0 flex h-10 w-10 items-center justify-center rounded-full bg-purple-100 ring-8 ring-white">
                            <span class="text-purple-600 font-bold">3</span>
                        </div>
                        <div
                            class="bg-slate-50 p-4 rounded-lg border border-slate-100 shadow-sm hover:border-purple-300 transition-colors">
                            <h3 class="text-lg font-bold text-slate-800">è‡ªå‹•å†ç™»éŒ² (Re-registration)</h3>
                            <p class="text-sm text-slate-600 mt-1 mb-2">Dify APIçµŒç”±ã§ã®ãƒŠãƒ¬ãƒƒã‚¸æ›´æ–°ã€‚</p>
                            <div
                                class="flex items-center space-x-2 text-xs font-mono bg-white p-2 rounded border border-slate-200 text-slate-500">
                                <span>ğŸš€</span>
                                <span>POST /v1/datasets/{id}/document/update</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-white border-t border-slate-200 py-6 mt-auto">
        <div class="max-w-6xl mx-auto px-4 text-center text-slate-400 text-sm">
            <p>Generated based on "detailed_design_spec.md" for Employment Regulation RAG Project.</p>
        </div>
    </footer>

    <script>
        // --- Navigation Logic ---
        function switchTab(tabId) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            // Remove active styles from buttons
            document.querySelectorAll('button[id^="btn-"]').forEach(btn => {
                btn.classList.remove('bg-blue-50', 'text-blue-700');
                btn.classList.add('text-slate-600');
            });

            // Show selected tab
            document.getElementById(`tab-${tabId}`).classList.add('active');

            // Add active style to selected button
            const activeBtn = document.getElementById(`btn-${tabId}`);
            if (activeBtn) {
                activeBtn.classList.remove('text-slate-600');
                activeBtn.classList.add('bg-blue-50', 'text-blue-700');
            }

            // Init charts if needed
            if (tabId === 'test' && !window.chartInitialized) {
                initChart();
                window.chartInitialized = true;
            }
        }

        // --- Data Simulator Logic ---
        function simulateProcessing() {
            const statusEl = document.getElementById('process-status');
            const outputEl = document.getElementById('processed-output');

            statusEl.innerText = "Processing...";
            statusEl.className = "text-amber-400 font-bold animate-pulse";

            setTimeout(() => {
                const chunks = [
                    {
                        title: "chunk_001.md",
                        content: "# ç¬¬1æ¡ï¼ˆç›®çš„ï¼‰\nã“ã®è¦å‰‡ã¯ã€è·å“¡ã®å°±æ¥­ã«é–¢ã—å¿…è¦ãªäº‹é …ã‚’å®šã‚ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã™ã‚‹ã€‚",
                        meta: "{ article: 1, source: 'uaminoseki_reg_01' }"
                    },
                    {
                        title: "chunk_002.md",
                        content: "# ç¬¬2æ¡ï¼ˆå®šç¾©ï¼‰\nã“ã®è¦å‰‡ã«ãŠã„ã¦ã€Œè·å“¡ã€ã¨ã¯ã€åœ°æ–¹å…¬å‹™å“¡æ³•ã«åŸºã¥ãæ¡ç”¨ã•ã‚ŒãŸè€…ã‚’ã„ã†ã€‚\n2 å‰é …ã®è·å“¡ã«ã¯...",
                        meta: "{ article: 2, source: 'uaminoseki_reg_01' }"
                    },
                    {
                        title: "chunk_003.md",
                        content: "# ç¬¬3æ¡ï¼ˆæœå‹™ã®æ ¹æœ¬åŸºæº–ï¼‰\nè·å“¡ã¯ã€å…¨ä½“ã®å¥‰ä»•è€…ã¨ã—ã¦ã€å…¬å…±ã®åˆ©ç›Šã®ãŸã‚ã«å‹¤å‹™ã—ã€ã‹ã¤...",
                        meta: "{ article: 3, source: 'uaminoseki_reg_01' }"
                    }
                ];

                outputEl.innerHTML = chunks.map(chunk => `
                    <div class="chunk-box bg-slate-700 p-3 rounded border border-slate-600 text-xs">
                        <div class="flex justify-between text-slate-400 mb-1 font-mono">
                            <span>ğŸ“„ ${chunk.title}</span>
                            <span>${chunk.meta}</span>
                        </div>
                        <div class="text-emerald-300 font-mono whitespace-pre-wrap">${chunk.content}</div>
                    </div>
                `).join('');

                outputEl.classList.remove('hidden');
                statusEl.innerText = "Completed";
                statusEl.className = "text-emerald-400 font-bold";
            }, 800);
        }

        // --- Chat Simulator Logic ---
        const responses = {
            'fact': {
                text: "æœ¬è¦å‰‡ã«ãŠã‘ã‚‹å¹´æ¬¡æœ‰çµ¦ä¼‘æš‡ã®æ—¥æ•°ã¯ã€å‹¤ç¶šå¹´æ•°ã«å¿œã˜ã¦å®šã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚æ¡ç”¨å¾Œ6ãƒ¶æœˆçµŒéã—ã€å…¨åŠ´åƒæ—¥ã®8å‰²ä»¥ä¸Šå‡ºå‹¤ã—ãŸè·å“¡ã«ã¯ã€10åŠ´åƒæ—¥ã®æœ‰çµ¦ä¼‘æš‡ãŒä»˜ä¸ã•ã‚Œã¾ã™ã€‚",
                source: "ã€æ ¹æ‹ æ¡æ–‡: è·å“¡å°±æ¥­è¦å‰‡ ç¬¬12æ¡ ç¬¬1é …ã€‘"
            },
            'condition': {
                text: "æ˜‡çµ¦ã«ã¤ã„ã¦ã¯ã€å‹¤å‹™æˆç¸¾ãŒè‰¯å¥½ã§ã‚ã‚‹ã“ã¨ãŒè¦ä»¶ã¨ãªã‚Šã¾ã™ã€‚æ¬ å‹¤æ—¥æ•°ãŒæ‰€å®šã®åŸºæº–ã‚’è¶…ãˆã‚‹å ´åˆã€æ˜‡çµ¦ã®å»¶ä¼¸ã¾ãŸã¯åœæ­¢ã®æªç½®ãŒå–ã‚‰ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚",
                source: "ã€æ ¹æ‹ æ¡æ–‡: çµ¦ä¸æ¡ä¾‹æ–½è¡Œè¦å‰‡ ç¬¬8æ¡ ç¬¬3é …ã€‘"
            },
            'unknown': {
                text: "ç”³ã—è¨³ã‚ã‚Šã¾ã›ã‚“ã€‚æä¾›ã•ã‚ŒãŸå°±æ¥­è¦å‰‡ãŠã‚ˆã³é–¢é€£è¦å®šå†…ã«ã¯ã€ç¤¾å“¡é£Ÿå ‚ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«é–¢ã™ã‚‹è¨˜è¼‰ã¯è¦‹å½“ãŸã‚Šã¾ã›ã‚“ã€‚",
                source: "ã€æ ¹æ‹ ãªã—ã€‘"
            }
        };

        function sendSimulatedMessage(type) {
            const chatDisplay = document.getElementById('chat-display');

            // User Message Map
            const questions = {
                'fact': "æœ‰çµ¦ä¼‘æš‡ã®æ—¥æ•°ã¯ä½•æ—¥ã§ã™ã‹ï¼Ÿ",
                'condition': "æ¬ å‹¤ãŒã‚ã‚‹å ´åˆã€æ˜‡çµ¦ã¯ã©ã†ãªã‚Šã¾ã™ã‹ï¼Ÿ",
                'unknown': "ç¤¾å“¡é£Ÿå ‚ã®ä»Šæ—¥ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯ï¼Ÿ"
            };

            // Add User Bubble
            const userBubble = document.createElement('div');
            userBubble.className = "chat-bubble user";
            userBubble.innerText = questions[type];
            chatDisplay.appendChild(userBubble);
            chatDisplay.scrollTop = chatDisplay.scrollHeight;

            // Typing Delay
            setTimeout(() => {
                // Add Bot Bubble
                const botBubble = document.createElement('div');
                botBubble.className = "chat-bubble bot animate-pulse";
                botBubble.innerHTML = `<span class="text-slate-400">Thinking...</span>`;
                chatDisplay.appendChild(botBubble);
                chatDisplay.scrollTop = chatDisplay.scrollHeight;

                setTimeout(() => {
                    const data = responses[type];
                    botBubble.classList.remove('animate-pulse');
                    botBubble.innerHTML = `
                        ${data.text}
                        <div class="mt-2 pt-2 border-t border-slate-200 text-xs font-bold text-blue-600">
                            ${data.source}
                        </div>
                    `;
                    chatDisplay.scrollTop = chatDisplay.scrollHeight;
                }, 1000);

            }, 500);
        }

        // --- Chart Logic ---
        function initChart() {
            const ctx = document.getElementById('evaluationChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['äº‹å®Ÿç¢ºèª (Fact Retrieval)', 'æ¡ä»¶åˆ†å² (Conditional)', 'ä¸åœ¨ç¢ºèª (No Info)'],
                    datasets: [{
                        data: [15, 10, 5], // Example distribution for 30 cases
                        backgroundColor: [
                            '#3b82f6', // Blue
                            '#a855f7', // Purple
                            '#64748b'  // Slate
                        ],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    family: "'Noto Sans JP', sans-serif",
                                    size: 12
                                }
                            }
                        },
                        title: {
                            display: true,
                            text: 'ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹æ§‹æˆæ¯” (Target: 30ä»¶)',
                            padding: { bottom: 20 }
                        }
                    },
                    cutout: '70%'
                }
            });
        }

        // Initial setup
        document.addEventListener('DOMContentLoaded', () => {
            // Tab logic handles init
        });

    </script>
</body>

</html>