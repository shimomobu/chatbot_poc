<!DOCTYPE html>
<html lang="ja">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â∞±Ê•≠Ë¶èÂâáRAG„Ç∑„Çπ„ÉÜ„É†ÊßãÊàêÂõ≥</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: #f8f7f4;
            /* Warm neutral background */
            color: #1f2937;
        }


        .component-box {
            transition: all 0.3s ease;
            cursor: pointer;
        }


        .component-box:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-color: #4b5563;
        }

        .component-box.active {
            ring: 2px;
            ring-color: #3b82f6;
            background-color: #eff6ff;
            border-color: #3b82f6;
        }

        .flow-step {
            transition: all 0.5s ease;
            opacity: 0.5;
            transform: scale(0.95);
        }

        .flow-step.active {
            opacity: 1;
            transform: scale(1);
            background-color: #fff;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #3b82f6;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }

            @media (min-width: 768px) {
                .chart-container {
                    height: 350px;
                }
            }
    </style>
</head>


<body class="min-h-screen flex flex-col">

    <header class="bg-white border-b border-gray-200 shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <span class="text-2xl">üèóÔ∏è</span>
                <h1 class="text-xl font-bold text-gray-800">Â∞±Ê•≠Ë¶èÂâáRAG„Ç∑„Çπ„ÉÜ„É†ÊßãÊàê <span
                        class="text-sm font-normal text-gray-500 ml-2">HP Z620 / Local Host</span></h1>
                <h1 class="text-xl font-bold text-gray-800">Â∞±Ê•≠Ë¶èÂâáRAG„Ç∑„Çπ„ÉÜ„É†ÊßãÊàê <span
                        class="text-sm font-normal text-gray-500 ml-2">HP Z620 / Local Host</span></h1>
            </div>
            <div class="text-sm text-gray-500">System Design v1.1</div>
        </div>
    </header>

    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <section class="mb-8 bg-white p-6 rounded-lg shadow-sm border border-gray-100">
            <h2 class="text-lg font-semibold text-gray-800 mb-2">„Ç∑„Çπ„ÉÜ„É†Ê¶ÇË¶Å</h2>
            <p class="text-gray-600 leading-relaxed">
                HP Z620‰∏ä„ÅßDocker„ÇíÁî®„ÅÑ„Å¶ÊßãÁØâ„Åï„Çå„Çã„ÄåÂ∞±Ê•≠Ë¶èÂâáRAG„ÉÅ„É£„ÉÉ„Éà„Éú„ÉÉ„Éà„Äç„ÅÆÊßãÊàêÂõ≥„Åß„Åô„ÄÇ
                „Ç§„É≥„Éï„É©ÊßãÊàê„Å´Âä†„Åà„ÄÅË©≥Á¥∞„Å™„Éá„Éº„ÇøÂá¶ÁêÜ„Å®Êé®Ë´ñ„ÅÆÊµÅ„Çå„ÇíË¶ñË¶öÂåñ„Åó„Åæ„Åó„Åü„ÄÇ
            </p>
        </section>

        <div class="border-b border-gray-200 mb-6">
            <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                <button onclick="switchTab('arch')" id="tab-arch"
                    class="tab-btn border-b-2 border-blue-500 py-4 px-1 text-sm font-medium text-blue-600 hover:text-blue-800"
                    aria-current="page">
                    Áâ©ÁêÜ„ÉªË´ñÁêÜÊßãÊàêÂõ≥
                </button>
                <button onclick="switchTab('data')" id="tab-data"
                    class="tab-btn border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300">
                    ‚ë† „Éá„Éº„Çø„Éë„Ç§„Éó„É©„Ç§„É≥
                </button>
                <button onclick="switchTab('rag')" id="tab-rag"
                    class="tab-btn border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300">
                    ‚ë° Êé®Ë´ñ„ÉØ„Éº„ÇØ„Éï„É≠„Éº
                </button>
                <button onclick="switchTab('resource')" id="tab-resource"
                    class="tab-btn border-b-2 border-transparent py-4 px-1 text-sm font-medium text-gray-500 hover:text-gray-700 hover:border-gray-300">
                    „É™„ÇΩ„Éº„ÇπÈÖçÂàÜ (64GB)
                </button>
            </nav>
        </div>

        <!-- VIEW 1: System Architecture -->
        <div id="view-arch" class="view-section space-y-6">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2 space-y-4">
                    <div class="bg-gray-50 p-6 rounded-xl border border-dashed border-gray-300">
                        <h3 class="text-sm font-bold text-gray-500 uppercase tracking-wider mb-4">üñ•Ô∏è Physical Host: HP
                            Z620 (Linux / WSL2)</h3>

                        <!-- Python Layer -->
                        <div class="mb-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200">
                            <h4 class="text-xs font-bold text-yellow-700 mb-3">üêç Python Environment (Local/Container)
                            </h4>
                            <h4 class="text-xs font-bold text-yellow-700 mb-3">üêç Python Environment (Local/Container)
                            </h4>
                            <div class="grid grid-cols-2 gap-4">
                                <div onclick="showDetails('scraper')"
                                    class="component-box bg-white p-3 rounded shadow-sm border border-yellow-100 flex items-center space-x-2">
                                    <div onclick="showDetails('scraper')"
                                        class="component-box bg-white p-3 rounded shadow-sm border border-yellow-100 flex items-center space-x-2">
                                        <span class="text-xl">üï∑Ô∏è</span>
                                        <div>
                                            <div class="font-bold text-gray-700 text-sm">Scraper</div>
                                        </div>
                                    </div>
                                    <div onclick="showDetails('processor')"
                                        class="component-box bg-white p-3 rounded shadow-sm border border-yellow-100 flex items-center space-x-2">
                                        <div onclick="showDetails('processor')"
                                            class="component-box bg-white p-3 rounded shadow-sm border border-yellow-100 flex items-center space-x-2">
                                            <span class="text-xl">‚öôÔ∏è</span>
                                            <div>
                                                <div class="font-bold text-gray-700 text-sm">Processor</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Storage Layer -->
                                <div onclick="showDetails('storage')"
                                    class="component-box mb-6 p-3 bg-gray-100 rounded-lg border border-gray-300 flex items-center justify-center space-x-3 text-gray-600 hover:bg-gray-200">
                                    <span>üíæ</span>
                                    <span class="font-medium text-sm">Local Storage (data/processed/)</span>
                                </div>

                                <div class="p-4 bg-blue-50 rounded-lg border border-blue-200">
                                    <h4 class="text-xs font-bold text-blue-700 mb-3">üê≥ Docker Layer (Single Host
                                        Network)</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div class="space-y-3">
                                            <div class="text-xs font-semibold text-blue-500 text-center">Dify Cluster
                                            </div>
                                            <div onclick="showDetails('dify-ui')"
                                                class="component-box bg-white p-3 rounded shadow-sm border border-blue-100 flex items-center justify-between">
                                                <div onclick="showDetails('dify-ui')"
                                                    class="component-box bg-white p-3 rounded shadow-sm border border-blue-100 flex items-center justify-between">
                                                    <span class="text-sm font-bold text-gray-700">Dify Web UI</span>
                                                    <span
                                                        class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">Port:
                                                        80</span>
                                                </div>
                                                <div onclick="showDetails('dify-api')"
                                                    class="component-box bg-white p-3 rounded shadow-sm border border-blue-100 flex items-center justify-between">
                                                    <div onclick="showDetails('dify-api')"
                                                        class="component-box bg-white p-3 rounded shadow-sm border border-blue-100 flex items-center justify-between">
                                                        <span class="text-sm font-bold text-gray-700">API Server</span>
                                                    </div>
                                                    <div onclick="showDetails('vectordb')"
                                                        class="component-box bg-white p-3 rounded shadow-sm border border-blue-100 flex items-center justify-between">
                                                        <div onclick="showDetails('vectordb')"
                                                            class="component-box bg-white p-3 rounded shadow-sm border border-blue-100 flex items-center justify-between">
                                                            <span class="text-sm font-bold text-gray-700">Vector
                                                                DB</span>
                                                            <span
                                                                class="text-xs bg-indigo-100 text-indigo-800 px-2 py-1 rounded">pgvector</span>
                                                        </div>
                                                    </div>

                                                    <!-- Inference Engine -->
                                                    <div class="space-y-3 border-l border-blue-200 pl-4 md:pl-6">
                                                        <div class="text-xs font-semibold text-purple-500 text-center">
                                                            Inference Engine
                                                        </div>
                                                        <div onclick="showDetails('ollama')"
                                                            class="component-box bg-white p-4 rounded shadow-sm border border-purple-100 flex flex-col items-center justify-center h-full">
                                                            <span class="text-2xl mb-2">ü¶ô</span>
                                                            <span class="text-sm font-bold text-gray-700">Ollama
                                                                API</span>
                                                            <span
                                                                class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded mt-2">Port:
                                                                11434</span>
                                                            <span class="text-xs text-gray-400 mt-1">Llama 3.1 8B</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- External Source -->
                                        <div class="flex justify-center">
                                            <div class="h-8 w-0.5 bg-gray-300"></div>
                                        </div>
                                        <div class="text-center">
                                            <div
                                                class="inline-flex items-center space-x-2 bg-white px-4 py-2 rounded-full border border-gray-200 shadow-sm text-sm text-gray-500">
                                                <span>üåê</span>
                                                <span>External: Ëá™Ê≤ª‰Ωì‰æãË¶èÈõÜ„Çµ„Ç§„Éà (Reiki-Base)</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="lg:col-span-1">
                                        <div
                                            class="sticky top-24 bg-white p-6 rounded-xl shadow-lg border border-gray-200 h-full max-h-[600px] overflow-y-auto">
                                            <div
                                                class="sticky top-24 bg-white p-6 rounded-xl shadow-lg border border-gray-200 h-full max-h-[600px] overflow-y-auto">
                                                <div class="flex items-center space-x-2 mb-4">
                                                    <span class="text-2xl">‚ÑπÔ∏è</span>
                                                    <h3 class="text-lg font-bold text-gray-800">Component Details</h3>
                                                </div>
                                                <div id="info-content" class="text-gray-600 text-sm leading-relaxed">
                                                    <p class="text-gray-400 italic">„Ç≥„É≥„Éù„Éº„Éç„É≥„Éà„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- VIEW 2: Data Pipeline -->
                                <div id="view-data" class="view-section hidden space-y-6">
                                    <div class="bg-white p-6 rounded-xl border border-gray-200">
                                        <div class="flex justify-between items-center mb-6">
                                            <div>
                                                <h3 class="text-lg font-bold text-gray-800">‚ë† „Éá„Éº„Çø„Éë„Ç§„Éó„É©„Ç§„É≥ (Data Pipeline)
                                                </h3>
                                                <p class="text-sm text-gray-500">Ëá™Ê≤ª‰Ωì„Çµ„Ç§„Éà„Åã„ÇâÂèñÂæó„Åó„ÅüÁîü„Éá„Éº„Çø„Çí„Éô„ÇØ„Éà„É´DB„Å∏Ê†ºÁ¥ç„Åô„Çã„Éó„É≠„Çª„Çπ„ÄÇ</p>
                                            </div>
                                            <button onclick="playFlow('data')"
                                                class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-sm flex items-center">
                                                <span class="mr-2">‚ñ∂</span> „Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÂÆüË°å
                                            </button>
                                        </div>
                                        <div id="flow-container-data" class="space-y-4 max-w-3xl mx-auto"></div>
                                    </div>
                                </div>

                                <!-- VIEW 3: Inference Workflow -->
                                <div id="view-rag" class="view-section hidden space-y-6">
                                    <div class="bg-white p-6 rounded-xl border border-gray-200">
                                        <div class="flex justify-between items-center mb-6">
                                            <div>
                                                <h3 class="text-lg font-bold text-gray-800">‚ë° Êé®Ë´ñ„ÉØ„Éº„ÇØ„Éï„É≠„Éº (Inference
                                                    Workflow)</h3>
                                                <p class="text-sm text-gray-500">„É¶„Éº„Ç∂„Éº„ÅÆË≥™Âïè„Å´ÂØæ„Åó„Å¶„ÄÅÁü•Ë≠ò„ÇíÊ§úÁ¥¢„ÉªÁµ±Âêà„Åó„Å¶ÂõûÁ≠î„Åô„Çã„Éó„É≠„Çª„Çπ„ÄÇ</p>
                                            </div>
                                            <button onclick="playFlow('rag')"
                                                class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-sm flex items-center">
                                                <span class="mr-2">‚ñ∂</span> „Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÂÆüË°å
                                            </button>
                                        </div>
                                        <div id="flow-container-rag" class="space-y-4 max-w-3xl mx-auto"></div>
                                    </div>
                                </div>

                                <!-- VIEW 4: Resources -->
                                <div id="view-resource" class="view-section hidden space-y-6">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                        <div
                                            class="bg-white p-6 rounded-xl border border-gray-200 flex flex-col items-center">
                                            <h3 class="text-lg font-bold text-gray-800 mb-2">„É°„É¢„É™Ââ≤„ÇäÂΩì„Å¶ (RAM: 64GB)</h3>
                                            <p class="text-sm text-gray-500 mb-6 text-center">Êé®Ë´ñ„Ç®„É≥„Ç∏„É≥(Ollama)„Å∏„ÅÆÈáçÁÇπÈÖçÂàÜË®≠Ë®à</p>

                                            <div class="chart-container">
                                                <canvas id="ramChart"></canvas>
                                            </div>
                                        </div>

                                        <!-- Specs Text -->
                                        <div class="space-y-6">
                                            <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
                                                <h3 class="text-lg font-bold text-gray-800 mb-4">„É™„ÇΩ„Éº„ÇπÈÖçÂàÜË¶Å‰ª∂</h3>
                                                <ul class="space-y-4 text-sm text-gray-600">
                                                    <li class="flex items-start">
                                                        <span
                                                            class="bg-purple-100 text-purple-800 p-1 rounded mr-3 text-xs font-bold mt-0.5">Ollama</span>
                                                        <span>
                                                            <strong>32GB (50%)</strong><br>
                                                            SLMÔºàLlama 3.1 8BÁ≠âÔºâ„ÅÆ„É¢„Éá„É´„Éá„Éº„Çø„ÇíVRAM‰∏çË∂≥ÊôÇ„Å´„Ç∑„Çπ„ÉÜ„É†RAM„Å∏Â±ïÈñã„Åô„Çã„Åü„ÇÅ„Å´ÊúÄÂ§ßÁ¢∫‰øù„ÄÇ
                                                        </span>
                                                    </li>
                                                    <li class="flex items-start">
                                                        <span
                                                            class="bg-blue-100 text-blue-800 p-1 rounded mr-3 text-xs font-bold mt-0.5">Dify
                                                            Cluster</span>
                                                        <span>
                                                            <strong>16GB (25%)</strong><br>
                                                            API Server, Web UI, Worker„Å´Âä†„Åà„ÄÅPostgreSQL (Vector
                                                            DB)„Å®Redis„ÅÆÂãï‰ΩúÈ†òÂüü„ÄÇ
                                                        </span>
                                                    </li>
                                                    <li class="flex items-start">
                                                        <span
                                                            class="bg-gray-100 text-gray-800 p-1 rounded mr-3 text-xs font-bold mt-0.5">System/OS</span>
                                                        <span>
                                                            <strong>16GB (25%)</strong><br>
                                                            „Éõ„Çπ„ÉàOS (Windows/WSL2) „Åä„Çà„Å≥„Åù„ÅÆ‰ªñ„ÅÆ„Éê„ÉÉ„ÇØ„Ç∞„É©„Ç¶„É≥„Éâ„Éó„É≠„Çª„ÇπÁî®„ÄÇ
                                                        </span>
                                                    </li>
                                                </ul>
                                            </div>

                                            <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm">
                                                <h3 class="text-lg font-bold text-gray-800 mb-4">„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ & „Çπ„Éà„É¨„Éº„Ç∏</h3>
                                                <div class="grid grid-cols-1 gap-4">
                                                    <div class="p-3 bg-gray-50 rounded border border-gray-100">
                                                        <div class="font-bold text-gray-700 text-sm mb-1">Network
                                                            Strategy</div>
                                                        <div class="text-xs text-gray-600">
                                                            Docker Bridge Network„Çí‰ΩøÁî®„ÄÇ<br>
                                                            <code>host.docker.internal</code> „Çí‰ªã„Åó„Å¶„Ç≥„É≥„ÉÜ„ÉäÈñìÈÄö‰ø°„ÇíÁ¢∫Á´ã„ÄÇ
                                                        </div>
                                                    </div>
                                                    <div class="p-3 bg-gray-50 rounded border border-gray-100">
                                                        <div class="font-bold text-gray-700 text-sm mb-1">Storage
                                                            Strategy</div>
                                                        <div class="text-xs text-gray-600">
                                                            SSD‰∏ä„Å´Docker Volume„Çí„Éû„Ç¶„É≥„Éà„ÄÇ<br>
                                                            Vector DB„ÅÆI/O„Éú„Éà„É´„Éç„ÉÉ„ÇØ„ÇíÂõûÈÅø„ÄÇ
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
    </main>

    <script>
        const componentData = {
            'scraper': {
                title: 'Scraper (Python)',
                role: 'Data Collection',
                tech: 'Requests, BeautifulSoup4',
                desc: 'Ëá™Ê≤ª‰Ωì„ÅÆWeb„Çµ„Ç§„ÉàÔºàReiki-Base„Å™„Å©Ôºâ„Å´„Ç¢„ÇØ„Çª„Çπ„Åó„ÄÅ‰æãË¶èÈõÜ„ÅÆHTML„Éá„Éº„Çø„ÇíÂèñÂæó„Åó„Åæ„Åô„ÄÇËá™ÂãïÂ∑°Âõû„É≠„Ç∏„ÉÉ„ÇØ„ÇíÂê´„Åø„Åæ„Åô„ÄÇ'
            },
            'processor': {
                title: 'Processor (Python)',
                role: 'Data Transformation',
                tech: 'Custom Parsing Logic',
                desc: 'ÂèñÂæó„Åó„ÅüHTML„Åã„Çâ„ÄåÁ¨¨1Á´†„Äç„ÄåÁ¨¨1Êù°„Äç„Å™„Å©„ÅÆÈöéÂ±§ÊßãÈÄ†„ÇíËß£Êûê„Åó„ÄÅDify„ÅåÁêÜËß£„Åó„ÇÑ„Åô„ÅÑMarkdownÂΩ¢Âºè„Å´Â§âÊèõ„ÉªÂàÜÂâ≤„Åó„Åæ„Åô„ÄÇ'
            },
            'storage': {
                title: 'Local Storage',
                role: 'Intermediate Persistence',
                tech: 'File System (data/processed/)',
                desc: 'Âä†Â∑•Ê∏à„Åø„ÅÆMarkdown„Éï„Ç°„Ç§„É´„Çí‰∏ÄÊôÇ‰øùÂ≠ò„Åô„ÇãÂ†¥ÊâÄ„Åß„Åô„ÄÇ„Åì„Åì„Åã„ÇâDify„Å∏„ÅÆ„Ç§„É≥„Éù„Éº„Éà„ÅåË°å„Çè„Çå„Åæ„Åô„ÄÇ'
            },
            'dify-ui': {
                title: 'Dify Web UI',
                role: 'User Interface',
                tech: 'Next.js / Nginx',
                port: 'Port: 80',
                desc: '„É¶„Éº„Ç∂„Éº„Åå„ÉÅ„É£„ÉÉ„Éà„ÇíË°å„ÅÜ„Åü„ÇÅ„ÅÆ„Éñ„É©„Ç¶„Ç∂„Éô„Éº„Çπ„ÅÆ„Ç§„É≥„Çø„Éº„Éï„Çß„Éº„Çπ„ÄÇÁÆ°ÁêÜÁîªÈù¢Ê©üËÉΩ„ÇÇÊèê‰æõ„Åó„Åæ„Åô„ÄÇ'
            },
            'dify-api': {
                title: 'Dify API Server',
                role: 'Orchestration Core',
                tech: 'Flask / Python',
                port: 'Port: 5001',
                desc: 'RAG„Éë„Ç§„Éó„É©„Ç§„É≥„ÅÆÂà∂Âæ°„ÄÅ„Éó„É≠„É≥„Éó„Éà„ÅÆÊßãÁØâ„ÄÅ„Ç≥„É≥„ÉÜ„Ç≠„Çπ„Éà„ÅÆÁµêÂêà„ÇíË°å„ÅÜ‰∏≠Ê†∏„Çµ„Éº„Éê„Éº„Åß„Åô„ÄÇ'
            },
            'vectordb': {
                title: 'Vector DB',
                role: 'Knowledge Store',
                tech: 'PostgreSQL + pgvector',
                port: 'Port: 5432',
                desc: 'Êù°Êñá„Éá„Éº„Çø„Çí„Éô„ÇØ„Éà„É´Âåñ„Åó„Å¶‰øùÂ≠ò„Åó„Åæ„Åô„ÄÇ„É¶„Éº„Ç∂„Éº„ÅÆË≥™Âïè„Å®„ÅÆÈ°û‰ººÂ∫¶Ê§úÁ¥¢ÔºàSemantic SearchÔºâ„ÇíÊãÖÂΩì„Åó„Åæ„Åô„ÄÇ'
            },
            'ollama': {
                title: 'Ollama API',
                role: 'Inference Engine',
                tech: 'Ollama / SLM',
                port: 'Port: 11434',
                desc: '„É≠„Éº„Ç´„É´„ÅßËªΩÈáèË®ÄË™û„É¢„Éá„É´ÔºàLlama 3.1 8B„Å™„Å©Ôºâ„ÇíÂãï‰Ωú„Åï„Åõ„Çã„Åü„ÇÅ„ÅÆ„Ç®„É≥„Ç∏„É≥„ÄÇDify„Åã„Çâ„ÅÆ„É™„ÇØ„Ç®„Çπ„Éà„Å´Âøú„Åò„Å¶„ÉÜ„Ç≠„Çπ„ÉàÁîüÊàê„ÇíË°å„ÅÑ„Åæ„Åô„ÄÇ'
            }
        };

        const flows = {
            'data': [
                { title: 'STEP 1: „Éá„Éº„Çø„Ç§„É≥„Ç∏„Çß„ÇØ„Ç∑„Éß„É≥', desc: '„Éï„Ç°„Ç§„É´(PDF/MD)„ÅÆ„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„ÇÑWeb„Çπ„ÇØ„É¨„Ç§„Éî„É≥„Ç∞„Å´„Çà„ÇãÁîü„Éá„Éº„ÇøÂèñÂæó„ÄÇ', icon: 'üì•' },
                { title: 'STEP 2: „ÇØ„É™„Éº„Éã„É≥„Ç∞ & ÂâçÂá¶ÁêÜ', desc: '‰∏çË¶Å„Å™„Çø„Ç∞„ÇÑË®òÂè∑„ÇíÂâäÈô§„Åó„ÄÅÁ¥îÁ≤ã„Å™„ÉÜ„Ç≠„Çπ„ÉàÊÉÖÂ†±„ÇíÊäΩÂá∫„ÄÇ', icon: 'üßπ' },
                { title: 'STEP 3: „ÉÅ„É£„É≥„Ç≠„É≥„Ç∞', desc: 'Èï∑Êñá„ÇíÈÅ©Âàá„Å™„Çµ„Ç§„Ç∫(500„Äú1000„Éà„Éº„ÇØ„É≥)„Å´ÂàÜÂâ≤„ÄÇÊñáËÑàÁ∂≠ÊåÅ„ÅÆ„Åü„ÇÅÈáçË§á„ÇíË®≠ÂÆö„ÄÇ', icon: '‚úÇÔ∏è' },
                { title: 'STEP 4: „Ç®„É≥„Éô„Éá„Ç£„É≥„Ç∞', desc: 'ÂàÜÂâ≤„ÉÜ„Ç≠„Çπ„Éà„ÇíLLM„Çí‰ªã„Åó„Å¶È´òÊ¨°ÂÖÉ„ÅÆ„Éô„ÇØ„Éà„É´Êï∞ÂÄ§„Å´Â§âÊèõ„ÄÇ', icon: 'üß†' },
                { title: 'STEP 5: „Éô„ÇØ„Éà„É´„Çπ„Éà„Ç¢„Å∏„ÅÆÊ†ºÁ¥ç', desc: '„Éô„ÇØ„Éà„É´„Éá„Éº„Çø„Å®„É°„Çø„Éá„Éº„Çø„ÇíWeaviateÁ≠â„ÅÆDB„Å´Ê∞∏Á∂öÂåñ„ÄÇ', icon: 'üíæ' }
            ],
            'rag': [
                { title: 'STEP 1: „ÇØ„Ç®„É™„ÅÆÂèó„ÅëÂèñ„Çä', desc: 'API„Åæ„Åü„ÅØWeb„ÉÅ„É£„ÉÉ„ÉàUIÁµåÁî±„Åß„É¶„Éº„Ç∂„Éº„ÅÆË≥™Âïè„ÇíÂèó‰ø°„ÄÇ', icon: 'üë§' },
                { title: 'STEP 2: ÊñáËÑà„ÅÆÊ§úÁ¥¢', desc: 'Ë≥™Âïè„Çí„Éô„ÇØ„Éà„É´Âåñ„Åó„ÄÅDB„Åã„ÇâÈ°û‰ººÂ∫¶„ÅÆÈ´ò„ÅÑÈñ¢ÈÄ£Êù°Êñá„ÇíÊ§úÁ¥¢„ÄÇ', icon: 'üîç' },
                { title: 'STEP 3: „É™„É©„É≥„Ç≠„É≥„Ç∞', desc: 'ÊäΩÂá∫„Åï„Çå„ÅüÊÉÖÂ†±„ÅÆÂÜçË©ï‰æ°„ÇíË°å„ÅÑ„ÄÅÊúÄ„ÇÇÁ≤æÂ∫¶„ÅÆÈ´ò„ÅÑÊÉÖÂ†±„ÅÆÂÑ™ÂÖàÈ†Ü‰Ωç‰ªò„Åë„ÄÇ', icon: 'üìä' },
                { title: 'STEP 4: „Éó„É≠„É≥„Éó„ÉàÊßãÁØâ', desc: '„Ç∑„Çπ„ÉÜ„É†ÊåáÁ§∫ + Ê§úÁ¥¢„Åï„Çå„ÅüÊñáËÑà + Ë≥™Âïè„ÇíÁµêÂêà„Åó„Åü„Éó„É≠„É≥„Éó„Éà„Çí‰ΩúÊàê„ÄÇ', icon: 'üìù' },
                { title: 'STEP 5: LLMÊé®Ë´ñ', desc: 'OllamaÁµåÁî±„Åß„É¢„Éá„É´„Åå„Éó„É≠„É≥„Éó„Éà„ÇíËß£Êûê„Åó„ÄÅÊúÄÈÅ©„Å™ÂõûÁ≠î„ÇíÁîüÊàê„ÄÇ', icon: '‚ö°' },
                { title: 'STEP 6: ÂõûÁ≠î„ÅÆËøîÂç¥', desc: 'Âá∫ÂÖ∏(Á¨¨‚óØÊù°)„Çí‰ªò‰∏é„Åó„ÅüÂõûÁ≠î„Çí„É¶„Éº„Ç∂„Éº„Å´Ë°®Á§∫„ÄÇ', icon: 'üí¨' }
            ]
        };

        function switchTab(tabId) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            document.getElementById(`view-${tabId}`).classList.remove('hidden');

            // Update tab styles
            document.querySelectorAll('.tab-btn').forEach(el => {
                el.classList.remove('border-blue-500', 'text-blue-600');
                el.classList.add('border-transparent', 'text-gray-500');
            });
            const activeTab = document.getElementById(`tab-${tabId}`);
            activeTab.classList.remove('border-transparent', 'text-gray-500');
            activeTab.classList.add('border-blue-500', 'text-blue-600');

            // Init chart if resource tab is selected and not init
            if (tabId === 'resource' && !window.ramChartInstance) {
                initChart();
            }
        }

        // Architecture View: Show Details
        function showDetails(componentId) {
            const data = componentData[componentId];
            if (!data) return;

            // Highlight active box
            document.querySelectorAll('.component-box').forEach(el => el.classList.remove('active'));
            // Find the element clicked (using event delegation assumption or direct logic)
            // Ideally passing 'this' or finding by ID would be better, but we rely on simple class toggle here for clicked item visual
            // Since we pass ID, we need to find element with onclick matching this ID for perfect highlight, 
            // but for simplicity we will just render the content.

            const content = `
                <div class="space-y-4 animate-fade-in">
                    <div>
                        <h4 class="text-xl font-bold text-gray-800">${data.title}</h4>
                        <div class="flex items-center space-x-2 mt-1">
                            <span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded uppercase tracking-wide">${data.role}</span>
                            ${data.port ? `<span class="text-xs bg-blue-50 text-blue-600 px-2 py-1 rounded font-mono">${data.port}</span>` : ''}
                        </div>
                    </div>
                    
                    <div class="p-4 bg-gray-50 rounded-lg border border-gray-100">
                        <div class="text-xs font-bold text-gray-500 uppercase mb-1">Technology Stack</div>
                        <div class="text-sm font-medium text-gray-800">${data.tech}</div>
                    </div>

                    <div>
                        <div class="text-xs font-bold text-gray-500 uppercase mb-1">Description</div>
                        <p class="leading-relaxed text-gray-700">${data.desc}</p>
                    </div>
                </div>
            `;
            document.getElementById('info-content').innerHTML = content;
        }

        function renderFlows() {
            ['data', 'rag'].forEach(type => {
                const container = document.getElementById(`flow-container-${type}`);
                container.innerHTML = flows[type].map((step, idx) => `
                    <div id="flow-${type}-${idx}" class="flow-step p-4 rounded-lg border border-l-4 border-gray-200 bg-gray-50 flex items-start space-x-4">
                        <div class="flex-shrink-0 bg-white p-2 rounded-full shadow-sm text-xl border border-gray-100">${step.icon}</div>
                        <div>
                            <h4 class="font-bold text-gray-800">${step.title}</h4>
                            <p class="text-sm text-gray-600 mt-1">${step.desc}</p>
                        </div>
                    </div>
                `).join('');
            });
        }

        let flowTimeouts = [];
        function playFlow(type) {
            flowTimeouts.forEach(t => clearTimeout(t));
            flowTimeouts = [];
            const steps = flows[type];
            steps.forEach((_, i) => {
                const el = document.getElementById(`flow-${type}-${i}`);
                el.classList.remove('active', 'border-blue-500');
                el.classList.add('border-gray-200');
            });

            steps.forEach((_, i) => {
                const timeout = setTimeout(() => {
                    // Deactivate previous
                    if (i > 0) {
                        const prev = document.getElementById(`flow-${type}-${i - 1}`);
                        prev.classList.remove('active', 'border-blue-500');
                        prev.classList.add('border-gray-200');
                    }

                    // Activate current
                    const curr = document.getElementById(`flow-${type}-${i}`);
                    curr.classList.add('active', 'border-blue-500');
                    curr.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, i * 1200);
                flowTimeouts.push(timeout);
            });

            // Finish state
            const finalTimeout = setTimeout(() => {
                const last = document.getElementById(`flow-${type}-${steps.length - 1}`);
                last.classList.remove('active', 'border-blue-500');
                last.classList.add('border-gray-200');
            }, steps.length * 1500 + 1000);
            flowTimeouts.push(finalTimeout);
        }

        function initChart() {
            const ctx = document.getElementById('ramChart').getContext('2d');
            window.ramChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Ollama', 'Dify', 'System'],
                    datasets: [{ data: [32, 16, 16], backgroundColor: ['#a855f7', '#3b82f6', '#9ca3af'] }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: { size: 12 }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function (context) {
                                    return ` ${context.label}: ${context.raw} GB`;
                                }
                            }
                        }
                    },
                    cutout: '65%'
                }
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderFlows();
            // Default select first item info
            showDetails('scraper');
        });
    </script>
</body>


</html>